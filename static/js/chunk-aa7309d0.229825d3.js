(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa7309d0"],{"201b":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"preview-pdf app-container"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.previewInfo.visible=!0}}},[e._v("预览pdf")]),n("vue-pdf",e._b({},"vue-pdf",e.previewInfo,!1,!0)),n("h3",[e._v("添加方法")]),e._m(0)],1)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v(" vue.config.js 中添加, 用于将public中的文件夹打包到dist/static中, 关键代码如下 "),n("pre",[e._v("        config\n          .plugin('copy')\n          .tap(args => {\n            args[0][0].ignore.push('**/*/**')\n            args[0].push({\n              from: resolve('public'),\n              to: resolve(`${outputDir}/${assetsDir}`),\n              toType: 'dir',\n              ignore: ['.jpg', '.jpeg', '.png', '.ico', 'index.html']\n            })\n            return args\n          })\n      ")])]),n("li",[e._v("public文件夹下放置 pdf工具包 (pdf.js 和 pdf.worker.js)")]),n("li",[e._v(" vue-pdf组件内部使用了 "),n("pre",[e._v("        import { getLocalFile } from '@/api/file'\n        getLocalFile方法用于指定pdf工具包的资源路径\n      ")])]),n("li",[e._v("vue-pdf只支持同源的pdf链接, 部分样式依赖el-image")])])}],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"viewer-fade"}},[e.visible?n("div",{staticClass:"vue-pdf el-image-viewer__wrapper",style:{"z-index":e.viewerZIndex},attrs:{tabindex:"-1"}},[n("div",{staticClass:"el-image-viewer__mask"}),n("div",{staticClass:"vue-pdf-wrapper"},[n("div",{staticClass:"vue-pdf-control"},[n("el-button",{on:{click:e.prev}},[e._v("上一页")]),n("el-button",{on:{click:e.next}},[e._v("下一页")]),n("span",{staticClass:"vue-pdf-page-num"},[e._v(" 页码: "),n("el-input-number",{attrs:{controls:!1},on:{change:e.changePageNum,blur:e.refreshPageNum},model:{value:e.page_num,callback:function(t){e.page_num=t},expression:"page_num"}}),e._v(" / "),n("span",{domProps:{textContent:e._s(e.page_count)}})],1),n("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addscale}}),n("el-button",{attrs:{icon:"el-icon-minus"},on:{click:e.minus}}),n("el-button",{attrs:{id:"prev"},on:{click:e.closepdf}},[e._v("关闭")])],1),n("div",{staticClass:"vue-pdf-content"},[n("canvas",{directives:[{name:"loading",rawName:"v-loading",value:e.pageRendering,expression:"pageRendering"}],staticClass:"canvas-style",attrs:{id:"the-canvas","element-loading-text":"拼命加载中"}})])])]):e._e()])},o=[],r=n("03a5"),c=n("b85c");n("14d9"),n("d9e2");let u=[];function l(){return window.pdfjsLib}const d=(e,t)=>{const n=document.getElementById(e),i=t||function(){};if(!n){const t=document.createElement("script");t.src=e,t.id=e,document.body.appendChild(t),u.push(i);const n="onload"in t?a:s;n(t)}function a(t){t.onload=function(){this.onerror=this.onload=null;var e,n=Object(c["a"])(u);try{for(n.s();!(e=n.n()).done;){const n=e.value;n(null,t)}}catch(i){n.e(i)}finally{n.f()}u=null},t.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+e),t)}}function s(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t,n=Object(c["a"])(u);try{for(n.s();!(t=n.n()).done;){const n=t.value;n(null,e)}}catch(i){n.e(i)}finally{n.f()}u=null}}}n&&i&&(l()?i(null,n):u.push(i))};var p=d,g=n("3f5e");const h=Object(g["a"])("/pdf/pdf.js"),m=Object(g["a"])("/pdf/pdf.worker.js");var f={name:"VuePdf",props:{visible:Boolean,src:String,zIndex:{type:Number,default:2e3}},data(){return{pdfDoc:null,pageNum:1,pageRendering:!1,pageNumPending:null,scale:1,page_num:0,page_count:0,maxscale:2,minscale:.8}},computed:{viewerZIndex(){const e=r["a"].nextZIndex();return this.zIndex>e?this.zIndex:e}},watch:{visible:{handler:"init",immediate:!0}},methods:{init(e){const t=this.src,n=this.initPDF;e&&t&&(this.pageNum=1,p(h,e=>{e?this.$message.error(e.message):n(t)}))},initPDF(e){const t=this.pageNum,n=this.renderPage;window.pdfjsLib.GlobalWorkerOptions.workerSrc=m,window.pdfjsLib.getDocument(e).then(e=>{this.pdfDoc=e,this.page_count=e.numPages,n(t)})},renderPage(e){const t=this.pdfDoc,n=this.scale,i=this.pageNum,a=this.renderPage;this.pageRendering=!0;const s=document.getElementById("the-canvas");t.getPage(e).then(e=>{const t=e.getViewport(n);s.height=t.height,s.width=t.width;const i=s.getContext("2d"),o={canvasContext:i,viewport:t},r=e.render(o);r.promise.then(()=>{this.pageRendering=!1,null!==this.pageNumPending&&(a(this.pageNumPending),this.pageNumPending=null)})}),this.page_num=i},addscale(){const e=this.scale,t=this.maxscale,n=this.pageNum,i=this.queueRenderPage;e>=t||(this.scale+=.1,i(n))},minus(){const e=this.scale,t=this.minscale,n=this.pageNum,i=this.queueRenderPage;e<=t||(this.scale-=.1,i(n))},prev(){const e=this.pageNum,t=this.queueRenderPage;e<=1||(this.pageNum--,t(this.pageNum))},next(){const e=this.pageNum,t=this.page_count,n=this.queueRenderPage;e>=t||(this.pageNum++,n(this.pageNum))},closepdf(){this.$emit("update:visible",!1)},queueRenderPage(e){const t=this.pageRendering,n=this.renderPage;t?this.pageNumPending=e:n(e)},changePageNum(e){const t=this.page_count,n=this.queueRenderPage;e<1||e>t||(this.pageNum=e,n(e))},refreshPageNum(){this.page_num=this.pageNum}}},v=f,b=(n("a325"),n("2877")),_=Object(b["a"])(v,s,o,!1,null,"788b97c2",null),w=_.exports,P={name:"PreviewPdf",components:{VuePdf:w},data(){return{previewInfo:{visible:!1,src:Object(g["a"])("/pdf/测试文件.pdf")}}}},N=P,x=Object(b["a"])(N,i,a,!1,null,null,null);t["default"]=x.exports},"3f5e":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("83d6"),a=n.n(i);function s(e){const t=window.location.origin;return`${t}/${a.a.name}/static${e}`}},"4afd":function(e,t,n){},a325:function(e,t,n){"use strict";n("4afd")}}]);